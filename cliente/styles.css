*,
*::before,
*::after {
    box-sizing: border-box;
}

/*  Cambio Clave: Asegurar que HTML y BODY ocupen toda la altura de la ventana */
html, body {
    height: 100%; /* Asegura que ambos tomen la altura total de la ventana */
    margin: 0;
}

:root {
    color-scheme: light dark;
}

body {
    /* Se elimin贸 height: 100vh; que a veces causa problemas con la altura real. Se reemplaz贸 por height: 100% en html, body. */
    font-family: sans-serif , 'Open Sans', 'Helvetica Neue', 'Roboto';
    display: grid;
    /* Mantener el centrado del contenedor */
    place-content: center;
    place-items: center;
    padding: 36px;
    grid-template-rows: 1fr;
    background-color: #a9e6d1;
}


#form {
    /* Las propiedades de posici贸n son correctas para fijarlo al final del contenedor */
    bottom: 0;
    display: flex;
    height: 50px;
    left: 0;
    padding: 3px;
    position: absolute;
    right: 0;
    /* Opcional: a帽adir un color de fondo al formulario para que se vea claro */
    background-color: white;
    border-top: 1px solid #eee; /* Separador sutil */
}

#form > button {
    background: #5650cb;
    border: 1px solid #443eb4;
    border-radius: 4px; 
    color: white; 
    cursor: pointer;

    margin: 4px;
    padding: 0 15px;
}

#input {
   
    border-radius: 4px;
    border: 3px solid #967ed7;
    color: #485979;
    font-size: 1.2rem;
    flex: 1;
    margin: 4px;
    padding: 0 15px; 
}

/* ... tu CSS existente ... */

#chat {
    border: 1px solid #5650cb;
    border-radius: 12px;
    overflow: hidden;
    width: 410px;
    height: calc(100vh - 72px);
    max-height: 800px;
    position: relative; /* 隆Esencial para el posicionamiento absoluto del #form y #qr! */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1),
                0 0 0 3px rgba(0, 0, 0, 0.25);
    background-color: #cbfeff; /* Asegura un fondo blanco para el 谩rea del chat */
}

/* ... tu CSS para #form, #input, #messages, etc. ... */

#qr {
    position: absolute; /* Posicionamiento absoluto dentro de #chat */
    bottom: 60px; /* Separado del fondo para no superponerse con el formulario */
    right: 15px; /* Separado del borde derecho */
    z-index: 10; /* Asegura que est茅 por encima de otros elementos si hay superposici贸n */
    display: flex; /* Para alinear el bot贸n y el QR */
    flex-direction: column; /* Para que el QR y el texto aparezcan debajo del bot贸n */
    align-items: flex-end; /* Alinea los elementos a la derecha */
     
}

#show-qr-btn {
    background: #524e9e;
    border: none;
    border-radius: 50%; /* Hace el bot贸n redondo */
    width: 90px;
    height: 90px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem; /* Tama帽o del icono */
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    color: white; /* Color del icono */
    margin-bottom: 5px; /* Espacio entre el bot贸n y el contenedor QR */
    transition: background-color 0.3s ease;
}

#show-qr-btn:hover {
    background-color: #443eb4;
}

#qr-container {
    background-color: white; /* Fondo blanco para el QR */
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    /* display:none; lo mantendr谩s en el HTML para JavaScript */
    text-align: center;
}

/* Ajusta el padding de #messages para que el QR no lo tape cuando est茅 oculto */
#messages {
    list-style: none;
    margin: 0;
    padding: 0; 
    height: calc(100% - 50px - 34px); 
    overflow-y: auto;
    padding-top: 5px; 
    padding-bottom: 5px; 
    /* Agregamos padding-right para que el texto de los mensajes no quede debajo del QR */
    padding-right: 60px; /* Ajusta seg煤n el tama帽o de tu bot贸n QR + espacio */
}

#messages > li {
    padding: .5rem 1rem;
    border-radius: #1ee;
    border: 1px solid #eee;
    background: #5650cb;
    color: #000;
    font-size: 2rem;
}

#messages > li:nth-child(odd) {
   background: #c5c5c5;
  

   

}


/* ... dentro de tu bloque <style> ... */

/* Estilo para la barra de direcci贸n IP */
#server-address {
padding: 8px 15px;
border-radius: 15px;
background-color: #000000; /* Color de fondo para distinguir */
color: #235fb8;
border-bottom: 1px solid #c3c3c3;
font-size: 0.9rem;
font-weight: bold;
text-align: center;
}

#ip-display {
color: #ffffff; /* Un color que haga la IP m谩s visible */
}

/* Modificar #messages para que use el espacio restante */
#messages {
list-style: none;
margin: 0;
padding: 0; 

/*  AJUSTE CLAVE: Calcular la altura restante */
/* 100% de #chat - Altura del formulario (50px) - Altura de la barra IP (aprox. 34px) */
height: calc(100% - 50px - 34px); 
overflow-y: auto; /* Permite desplazamiento si hay muchos mensajes */
padding-top: 5px; 
padding-bottom: 5px; 
}

/* ... el resto de tus estilos ... */